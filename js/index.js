// Generated by CoffeeScript 1.7.1
(function() {
  var init_menu_buttons, set_help_text;

  $(function() {
    var chart, render_vis;
    chart = null;
    init_menu_buttons();
    render_vis = (function(_this) {
      return function(dataset_name, data, params) {
        if (params == null) {
          params = null;
        }
        $(".load-screen").hide();
        chart = new Potato(data, params);
        $(".menu-button-wrapper").show();
        return $(".help-wrapper").show();
      };
    })(this);
    $("#file-uploader").on('change', (function(_this) {
      return function(e) {
        var file, fileReader;
        file = e.target.files[0];
        console.log(file);
        fileReader = new FileReader();
        fileReader.onload = function(e) {
          return render_vis(fileReader.name, d3.csv.parse(fileReader.result));
        };
        return fileReader.readAsText(file);
      };
    })(this));
    $("#basketball-dataset").on('click', (function(_this) {
      return function(e) {
        return d3.csv("data/basketball/basketball.csv", function(data) {
          return render_vis('basketball', data, {
            split: true,
            size: true,
            "class": 'team'
          });
        });
      };
    })(this));
    $("#billionaire-dataset").on('click', (function(_this) {
      return function(e) {
        return d3.csv("data/billion/billionaire.csv", function(data) {
          return render_vis('billionaire', data);
        });
      };
    })(this));
    return $("#auto-dataset").on('click', (function(_this) {
      return function(e) {
        return d3.csv("data/auto/auto.csv", function(data) {
          return render_vis('auto', data);
        });
      };
    })(this));
  });

  set_help_text = function(name) {
    $("#toolbar").append("<div class='dataset-info'></div>");
    if (name === "basketball") {
      return $(".dataset-info").html("<b>Fun things to try:</b> <ul> <li>split by 'position' and size by 'height' </li> <li>split by 'age' and size by 'salary'</li> <li>split by 'team', click-n-drag to select your favorite team, and explore from there</li> </ul>");
    } else if (name === "billionaire") {
      return $(".dataset-info").html("<b>Fun things to try:</b> <ul> <li>split by 'source' and color by 'gender'</li> <li>split by 'age' and size by 'net-worth'</li> <li>split by 'country', click-n-drag to select a country of interest, and explore from there</li> </ul>");
    } else if (name === "auto") {
      return $(".dataset-info").html("<b>Fun things to try:</b> <ul> <li>split by 'drive-wheels' and color by 'price'</li> <li>split by 'highway-mpg' and size by 'horsepower'</li> <li>split by 'make', click-n-drag to select a make, and explore from there</li> </ul>");
    } else {

    }
  };

  init_menu_buttons = function() {
    $(".menu-button").hover(function() {
      return $(".menu-items").slideDown(100);
    });
    $(".menu-button-wrapper").mouseleave(function() {
      return $(".menu-items").slideUp(100);
    });
    $("#new-option").on("click", (function(_this) {
      return function() {
        return location.reload();
      };
    })(this));
    $("#help-option").on("click", (function(_this) {
      return function() {
        return $(".help-wrapper").show();
      };
    })(this));
    return $(".help-wrapper").on("click", (function(_this) {
      return function() {
        return $(".help-wrapper").hide();
      };
    })(this));
  };

}).call(this);
